<!-- templates/emails/password-change-verification.ejs -->
<%
// Template data setup
const headerTitle = 'ðŸ”’ Password Change Verification';
const headerBackground = 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)';
const content = `
    <p>Hello <strong>${admin.name}</strong>,</p>
    
    <p>You have requested to change your password for your ${churchName} admin account. This is a critical security action that requires verification.</p>
    
    <div class="card-highlight">
        <p><strong>Your Password Change Verification Token:</strong></p>
        <div class="token-display">${token}</div>
        <p><small>This token will expire in <strong>${expiryMinutes} minutes</strong></small></p>
    </div>
    
    <div class="steps-list">
        <p><strong>How to complete your password change:</strong></p>
        <div class="step">
            <div class="step-number">1</div>
            <div class="step-content">Return to the admin dashboard password change section</div>
        </div>
        <div class="step">
            <div class="step-number">2</div>
            <div class="step-content">Enter the verification token above when prompted</div>
        </div>
        <div class="step">
            <div class="step-number">3</div>
            <div class="step-content">Enter your new password and confirm the change</div>
        </div>
        <div class="step">
            <div class="step-number">4</div>
            <div class="step-content">You will be logged out and need to log in again with your new password</div>
        </div>
    </div>
    
    <div class="alert alert-danger">
        <p><strong>ðŸš¨ CRITICAL SECURITY NOTICE:</strong></p>
        <ul style="margin: 10px 0; padding-left: 20px;">
            <li><strong>This token is valid for ${expiryMinutes} minutes only</strong></li>
            <li><strong>NEVER share this token with anyone</strong></li>
            <li><strong>All your active sessions will be terminated after password change</strong></li>
            <li><strong>If you did not request this password change, CONTACT SUPPORT IMMEDIATELY</strong></li>
            <li><strong>This may indicate unauthorized access to your account</strong></li>
        </ul>
    </div>
    
    <div class="card">
        <p><strong>Account Details:</strong></p>
        <ul>
            <li>Email: ${admin.email}</li>
            <li>Request Time: ${requestTime}</li>
            <li>Account Type: ${admin.role === 'super_admin' ? 'Super Administrator' : 'Administrator'}</li>
        </ul>
    </div>
    
    <p>If you did not request this password change, please:</p>
    <ol>
        <li>Do NOT use the token above</li>
        <li>Change your password immediately through the forgot password option</li>
        <li>Contact our support team at ${churchEmail}</li>
        <li>Review your account for any unauthorized changes</li>
    </ol>
    
    <p>Best regards,<br>
    <strong>The ${churchName} Security Team</strong></p>
`;
%>

<%- include('partials/email-wrapper', { 
    headerTitle,
    headerBackground,
    content,
    churchName,
    churchAddress,
    churchPhone,
    churchEmail
}) %>